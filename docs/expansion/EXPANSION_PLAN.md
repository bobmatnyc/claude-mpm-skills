# Skills Expansion Plan

**Scope:** Expand `claude-mpm-skills` with additional depth (improve existing skills) and breadth (add new skills/bundles), while keeping the repository’s “self-contained + progressive disclosure” model intact.

**Current priority:** Phase 4 (bundles).

**Status:** Phase 0 completed; Phase 2 completed (added `golang-grpc`, `golang-concurrency-patterns`, `axum`, `clap`, `fastify`, `cypress`); Phase 1 completed (added `kubernetes`, `terraform`, `opentelemetry`, `threat-modeling`); Phase 3 completed (upgraded `security-scanning`, `nextjs-core`, `nextjs-v16`, `fastapi-local-dev`); Phase 4 in progress (added `golang-web-stack` bundle); manifest now covers all 110 skills.

## Current Structure & Model (What Exists Today)

### Source vs Deployment

- **Source-of-truth skills (tracked):**
  - `toolchains/**/SKILL.md` + `metadata.json`
  - `universal/**/SKILL.md` + `metadata.json`
  - `examples/**/SKILL.md` + `metadata.json`
- **Deployed skills (not tracked):**
  - `.claude/skills/` (flat directory) generated by `scripts/flatten_skills.sh`
- **Catalog/index:**
  - `manifest.json` groups skills under `skills.universal`, `skills.toolchains`, `skills.examples`

### Skill Model (Common Patterns)

- **Self-containment:** Avoid inter-skill relative links/imports; skills must work when deployed standalone in a flat directory.
- **Progressive disclosure:** Small entry point + optional deep dives via `references/` (used heavily in newer/large skills).
- **Quality gates:** Voice + ✅/❌ example format conventions exist (see `scripts/check_voice_consistency.py`, `docs/guides/VOICE_CONSISTENCY_GUIDE.md`).

## Findings from Repo Review (Opportunities)

### 1) Manifest coverage gap (must-fix foundation)

Resolved: `manifest.json` now covers **110/110** `SKILL.md` files under `toolchains/`, `universal/`, and `examples/`.

Previously missing from `manifest.json` (now included):
- `toolchains/golang/{cli,data,observability,testing,web}/SKILL.md` (5 skills)
- `universal/web/api-design-patterns/SKILL.md` (1 skill)
- `toolchains/javascript/frameworks/svelte5-runes-static/SKILL.md` (1 skill)

### 2) Format consistency gap (targeted)

- Resolved: `toolchains/javascript/frameworks/svelte5-runes-static/SKILL.md` now includes YAML frontmatter and matches the standard skill template patterns.
- Several “legacy” skills don’t declare `progressive_disclosure` in the way newer skills do; this reduces consistency for loaders and reviewers even when the content is high-quality.

### 3) Breadth gaps (high-leverage additions)

Coverage is strong for modern web stacks, but relatively thin in:
- **Infrastructure & ops:** secrets management, incident response, service mesh patterns
- **Security depth:** auth/OIDC patterns, web security headers/CSP, supply-chain security hardening
- **Backend fundamentals:** caching (Redis), queues/streams (SQS/Kafka/RabbitMQ), gRPC patterns (esp. Go/TS)
- **Rust breadth:** web services (Axum), CLI tooling (Clap), async/Tokio patterns

### 4) Depth gaps (upgrade candidates)

Candidates that would benefit from additional “production playbooks” and/or reference deep dives:
- `universal/security/security-scanning` (expand beyond OWASP snippets into workflows + tooling matrix + CI patterns)
- `toolchains/nextjs/*` (testing, observability, auth, caching/dynamic rendering pitfalls)
- `toolchains/python/frameworks/*` (modern deployment, async patterns, structured logging, security)
- `toolchains/golang/*` (gRPC, concurrency pitfalls, production observability patterns)

## Expansion Roadmap (Phased)

### Phase 0 — Foundation (Correctness + Consistency)

**Goal:** Ensure the catalog and tooling reflect the actual repository contents.

Deliverables:
- Regenerate/fix `manifest.json` so it includes all `SKILL.md` under `toolchains/`, `universal/`, `examples/`.
- Standardize `toolchains/javascript/frameworks/svelte5-runes-static` into the normal skill format (frontmatter + progressive disclosure + `metadata.json` schema alignment).
- Update any “count” references in docs/scripts that still assume older totals (e.g., “89 skills”).

Acceptance criteria:
- `manifest.json` covers all discovered skills (currently 110/110; no missing/extra paths).
- CI (or a lightweight script) can detect future divergence between manifest and filesystem.

### Phase 2 — Breadth (Language/Toolchain Growth)

**Goal:** Fill thin toolchains with the highest-impact missing pieces.

Go:
- ✅ `toolchains/golang/grpc` (protobuf, interceptors, streaming, testing)
- ✅ `toolchains/golang/concurrency` (contexts, errgroups, cancellation, race pitfalls)

Rust:
- ✅ `toolchains/rust/frameworks/axum` (routing, extractors, middleware, testing)
- ✅ `toolchains/rust/cli/clap` (arg parsing, config, UX conventions)

TypeScript/JavaScript:
- ✅ `toolchains/typescript/frameworks/fastify` (schema validation, perf, plugins)
- ✅ `toolchains/javascript/testing/cypress` (browser E2E counterpart to Playwright)

### Phase 1 — Breadth (Infra + Reliability Core)

**Goal:** Add universally useful “infrastructure reliability” skills that support most stacks.

Delivered:
- ✅ `universal/infrastructure/kubernetes` (workloads, probes, rollouts, debugging runbook, hardening)
- ✅ `universal/infrastructure/terraform` (state, modules, environments, CI guardrails)
- ✅ `universal/observability/opentelemetry` (logs/metrics/traces, OTLP + Collector, sampling, troubleshooting)
- ✅ `universal/security/threat-modeling` (STRIDE workshop, threat register, mitigations → tickets + tests)

### Phase 3 — Depth (Upgrade Existing Skills)

**Goal:** Bring “legacy” skills up to the same navigability/actionability level as the most modern ones.

Patterns to add (as appropriate per skill):
- Progressive disclosure entry point + `references/` deep dives
- Decision trees (“choose X vs Y”) and troubleshooting sections
- Production checklists (security, logging, monitoring, deployment)

Suggested priority targets:
- ✅ `universal/security/security-scanning`
- ✅ `toolchains/nextjs/core`
- ✅ `toolchains/nextjs/v16`
- ✅ `toolchains/python/frameworks/fastapi-local-dev`
- `toolchains/python/frameworks/django`, `toolchains/python/frameworks/flask`

### Phase 4 — Bundles (Optional Packaging)

**Goal:** Improve adoption by shipping “ready-to-deploy” bundles for common stacks.

Proposed bundles:
- ✅ `.bundles/golang-web-stack/` (Go web + testing + observability + security + Docker)
- `.bundles/infra-reliability-stack/` (docker + github-actions + kubernetes + opentelemetry + security)

## Execution Checklist (When We “Run” This Plan)

For each new or upgraded skill:
- Create/modify skill under `toolchains/` or `universal/` (not `.claude/skills/`)
- Ensure self-containment (no `../` links; no cross-skill imports)
- Add a compact entry point and move deep dives into `references/` when large
- Run `scripts/check_voice_consistency.py` on changed skills
- Regenerate `manifest.json` and confirm it covers all skills
- (Optional) Run `scripts/flatten_skills.sh --dry-run` to verify deployability

## Decisions Needed From You

Decisions confirmed:

1) Treat **Phase 0** as a prerequisite.
2) Prioritize **Phase 2 (Language/Toolchain Growth)** before **Phase 1 (Infra/Reliability)**.

Still needed:

3) Any “must-cover” platforms (AWS/GCP/Azure/Cloudflare) or domains (mobile, data engineering, ML) to include?
